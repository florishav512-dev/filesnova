const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/qpdf-B5El3ul0.js","assets/index-CdJ50Lv-.js","assets/index-yRW1SRU8.css","assets/___vite-browser-external_commonjs-proxy-CKASNogD.js"])))=>i.map(i=>d[i]);
import{r as s,j as e,_ as D}from"./index-CdJ50Lv-.js";import{P as C}from"./PageLayout-DvwmcfQ-.js";import{U as _}from"./UploadZone-qRPxcvWc.js";import{T as q}from"./ToolSeo-D0eo2puh.js";import"./arrow-left-CdvGzl3c.js";import"./sparkles-CBasR0l-.js";import"./upload-CyMQc6CH.js";let u=null;function S(){return u||(u=D(()=>import("./qpdf-B5El3ul0.js"),__vite__mapDeps([0,1,2,3])).then(r=>r.default({locateFile:a=>`/qpdf/${a}`}))),u}const K=()=>{const[r,a]=s.useState(null),[p,c]=s.useState(!1),[f,t]=s.useState(null),h=s.useRef(null),m=s.useRef(null),x=s.useRef(null),w=s.useRef(null),j=s.useRef(null),y=s.useRef(null),b=s.useRef(null),L=l=>{a(l),t(null)},N=async()=>{if(!r){t("Please select a PDF file.");return}c(!0),t(null);try{const l=await S(),A=new Uint8Array(await r.arrayBuffer()),P=h.current?.value||"",g=m.current?.value||"",k=x.current?.value==="256"?"256":"128";if(!P&&!g){t("You must provide at least a user or an owner password."),c(!1);return}const o=[];w.current?.checked&&o.push("print"),j.current?.checked&&o.push("modify"),y.current?.checked&&o.push("extract"),b.current?.checked&&o.push("annotate");const v="input.pdf",F="locked.pdf",i=["--encrypt",P,g,k];o.length>0&&i.push(`--allow=${o.join(",")}`),k==="256"&&i.push("--use-aes=y"),i.push("--",v,F);const d=await l.run(i,{[v]:A});if(d.exitCode!==0)throw console.error("qpdf stderr:",d.stderr),new Error(d.stderr||"qpdf failed to process the file.");const R=d.files[F];if(!R)throw new Error("qpdf did not produce an output file.");const E=new Blob([R],{type:"application/pdf"}),n=document.createElement("a");n.href=URL.createObjectURL(E),n.download=`locked_${r.name}`,document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(l){console.error(l),t(l.message||"An error occurred while locking the PDF.")}finally{c(!1)}};return e.jsxs(C,{children:[e.jsx(q,{title:"Lock PDF",description:"Encrypt and protect your PDF files with a password."}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Lock PDF"}),e.jsx("p",{className:"text-lg mt-2",children:"Encrypt and protect your PDF files with a password."})]}),e.jsxs(e.Fragment,{children:[e.jsx(_,{onFileSelect:L,accept:{"application/pdf":[".pdf"]}}),r&&e.jsxs("div",{className:"mt-8 p-6 border rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Encryption Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userPassword",children:"User Password (for opening)"}),e.jsx("input",{type:"password",id:"userPassword",ref:h,className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ownerPassword",children:"Owner Password (for permissions)"}),e.jsx("input",{type:"password",id:"ownerPassword",ref:m,className:"w-full p-2 border rounded"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"keyLength",children:"Key Length"}),e.jsxs("select",{id:"keyLength",ref:x,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"128",children:"128-bit"}),e.jsx("option",{value:"256",children:"256-bit"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Permissions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"allowPrint",ref:w,defaultChecked:!0})," ",e.jsx("label",{htmlFor:"allowPrint",children:"Allow Printing"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"allowModify",ref:j})," ",e.jsx("label",{htmlFor:"allowModify",children:"Allow Modify"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"allowCopy",ref:y})," ",e.jsx("label",{htmlFor:"allowCopy",children:"Allow Copying"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"allowAnnotations",ref:b})," ",e.jsx("label",{htmlFor:"allowAnnotations",children:"Allow Annotations"})]})]})]}),e.jsx("button",{onClick:N,disabled:p||!r,className:"mt-6 w-full bg-blue-600 text-white p-3 rounded-lg disabled:bg-gray-400",children:p?"Locking...":"Lock PDF"}),f&&e.jsx("p",{className:"text-red-500 mt-4",children:f})]})]})]})};export{K as default};
