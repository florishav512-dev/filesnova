import{r as s,j as e}from"./index-BqODA4Z-.js";import{P as R}from"./PageLayout-DPcjo4_W.js";import{U as N}from"./UploadZone-Dcn5bgy0.js";import{T as A}from"./ToolSeo-DcR00B-d.js";import"react-router-dom";import"./arrow-left-2x_nUAsl.js";import"./sparkles-p176mTZJ.js";import"./upload-CkfWjy5u.js";const B=()=>{const[d,y]=s.useState(null),[r,b]=s.useState(null),[i,c]=s.useState(!1),[a,o]=s.useState(null),u=s.useRef(null),p=s.useRef(null),h=s.useRef(null),f=s.useRef(null),m=s.useRef(null),x=s.useRef(null),w=s.useRef(null);s.useEffect(()=>{const l=document.createElement("script");return l.src="/qpdf/qpdf.js",l.onload=()=>{window.createModule().then(n=>{y(n)})},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[]);const P=l=>{b(l),o(null)},g=async()=>{if(!r||!d){o("Please select a PDF file and wait for the module to load.");return}c(!0),o(null);try{const l=new Uint8Array(await r.arrayBuffer()),n=u.current?.value||"",j=p.current?.value||"",k=h.current?.value==="256"?256:128;if(!n&&!j){o("You must provide at least a user or an owner password."),c(!1);return}const v={print:f.current?.checked?"y":"n",modify:m.current?.checked?"y":"n",copy:x.current?.checked?"y":"n",annot:w.current?.checked?"y":"n"},F=d.encrypt(l,{userPassword:n,ownerPassword:j,keyLength:k,permissions:v}),L=new Blob([F],{type:"application/pdf"}),t=document.createElement("a");t.href=URL.createObjectURL(L),t.download=`locked_${r.name}`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(l){console.error(l),o("An error occurred while locking the PDF.")}finally{c(!1)}};return e.jsxs(R,{children:[e.jsx(A,{title:"Lock PDF",description:"Encrypt and protect your PDF files with a password."}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Lock PDF"}),e.jsx("p",{className:"text-lg mt-2",children:"Encrypt and protect your PDF files with a password."})]}),d?e.jsxs(e.Fragment,{children:[e.jsx(N,{onFileSelect:P,accept:{"application/pdf":[".pdf"]}}),r&&e.jsxs("div",{className:"mt-8 p-6 border rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Encryption Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userPassword",children:"User Password (for opening)"}),e.jsx("input",{type:"password",id:"userPassword",ref:u,className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ownerPassword",children:"Owner Password (for permissions)"}),e.jsx("input",{type:"password",id:"ownerPassword",ref:p,className:"w-full p-2 border rounded"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"keyLength",children:"Key Length"}),e.jsxs("select",{id:"keyLength",ref:h,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"128",children:"128-bit"}),e.jsx("option",{value:"256",children:"256-bit"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Permissions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"allowPrint",ref:f,defaultChecked:!0})," ",e.jsx("label",{htmlFor:"allowPrint",children:"Allow Printing"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"allowModify",ref:m})," ",e.jsx("label",{htmlFor:"allowModify",children:"Allow Modify"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"allowCopy",ref:x})," ",e.jsx("label",{htmlFor:"allowCopy",children:"Allow Copying"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"allowAnnotations",ref:w})," ",e.jsx("label",{htmlFor:"allowAnnotations",children:"Allow Annotations"})]})]})]}),e.jsx("button",{onClick:g,disabled:i,className:"mt-6 w-full bg-blue-600 text-white p-3 rounded-lg disabled:bg-gray-400",children:i?"Locking...":"Lock PDF"}),a&&e.jsx("p",{className:"text-red-500 mt-4",children:a})]})]}):e.jsx("div",{className:"text-center my-8",children:e.jsx("p",{children:"Loading PDF processing module..."})})]})};export{B as default};
