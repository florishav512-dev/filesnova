import{r as x,j as e,H as ge}from"./index-B-P-8OYA.js";import{J as Q}from"./JsonLd-DLR9jh9w.js";import{J as we}from"./jszip.min-BodG_fE3.js";import{P as je,S as O}from"./PDFButton-xfqTyEFF.js";import{U as ve}from"./UploadZone-CmbkFF6-.js";import{A as ye}from"./AdSpace-Cygjr-g5.js";import{T as Ne}from"./ToolSeo-DrI2oGCf.js";import{T as Pe,S as Se}from"./toolSeoData-OE8wvMu-.js";import{a as Fe}from"./FILESNOVANEWICON-BHe6sz7Q.js";import{T as Ee}from"./ToolsMenu-CrK1CbmZ.js";import{B as ke}from"./book-open-qZrdfFJY.js";import{S as Ae}from"./shield-Dt44Dboq.js";import{Z as Te}from"./zap-BPLFS2HC.js";import{S as Ue}from"./settings-C87d3Ro_.js";import{I as Ce}from"./info-CDqiH4bW.js";import{D as Be}from"./download-C9i67Vn3.js";import"./jszip.min-BpOuR_85.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./index-Bd3not8O.js";import"./upload-DpPaOGPK.js";import"./createLucideIcon-LAAGRmDe.js";const De={A4:{width:595.28,height:841.89},Letter:{width:612,height:792}},st=()=>{const[k,Y]=x.useState(null),[I,R]=x.useState(!1),[z,N]=x.useState(0),[H,y]=x.useState(""),[T,V]=x.useState(null),[$,U]=x.useState(null),[C,ee]=x.useState("A4"),[r,A]=x.useState({top:54,right:54,bottom:54,left:54}),[G,te]=x.useState("Helvetica"),[F,se]=x.useState(12),[E,ae]=x.useState(1.4),[q,re]=x.useState(!0),[Z,oe]=x.useState(!0),{width:P,height:w}=x.useMemo(()=>De[C],[C]),le=x.useMemo(()=>P-r.left-r.right,[P,r.left,r.right]);x.useMemo(()=>w-r.top-r.bottom,[w,r.top,r.bottom]);const B=x.useRef(null),D=t=>{B.current&&URL.revokeObjectURL(B.current),B.current=t,V(t)},ne=t=>{const o=t[0]||null;Y(o),D(null),U(null),N(0),y("")},ie=t=>{try{const d=new DOMParser().parseFromString(t,"text/html");return d.querySelectorAll("script,style,noscript").forEach(n=>n.remove()),(d.body?.textContent||d.documentElement?.textContent||"").replace(/\s+\n/g,`
`).trim()}catch{return t}},L=async(t,o)=>{const d=t.file(o);if(!d)throw new Error(`Missing file in EPUB: ${o}`);return await d.async("string")},ce=t=>t.includes("/")?t.slice(0,t.lastIndexOf("/")):"",de=(t,o)=>t?`${t}/${o}`.replace(/\/+/g,"/"):o,_=t=>new DOMParser().parseFromString(t,"application/xml"),me=async t=>{const o=await L(t,"META-INF/container.xml"),n=_(o).querySelector("rootfile")?.getAttribute("full-path")||"";if(!n)throw new Error("Invalid EPUB: OPF not found");const f=await L(t,n),l=_(f),c=ce(n),j=l.querySelector('metadata > *[property="title"], metadata > dc\\:title, metadata > title')?.textContent?.trim()||"",m={};l.querySelectorAll("manifest > item").forEach(a=>{const u=a.getAttribute("id")||"",g=a.getAttribute("href")||"",K=a.getAttribute("media-type")||"";u&&g&&(m[u]={href:de(c,g),type:K})});const s=[];l.querySelectorAll("spine > itemref").forEach(a=>{const u=a.getAttribute("idref")||"";u&&m[u]&&s.push(u)});let p=[];return s.length?p=s.map(a=>m[a]).filter(Boolean).filter(a=>/html/i.test(a.type)||/\.x?html$/i.test(a.href)):p=Object.values(m).filter(a=>/html/i.test(a.type)||/\.x?html$/i.test(a.href)),{title:j,chapters:p,opfPath:n}},pe=async(t,o)=>{switch(o){case"TimesRoman":return await t.embedFont(O.TimesRoman);case"Courier":return await t.embedFont(O.Courier);default:return await t.embedFont(O.Helvetica)}},J=(t,o,d,h)=>{const n=t.split(/\s+/).filter(Boolean),f=[];let l="";for(let c=0;c<n.length;c++){const j=l?`${l} ${n[c]}`:n[c];if(d.widthOfTextAtSize(j,h)<=o)l=j;else if(l&&f.push(l),d.widthOfTextAtSize(n[c],h)>o){const s=n[c].split("");let p="";for(const a of s){const u=p+a;d.widthOfTextAtSize(u,h)<=o?p=u:(p&&f.push(p),p=a)}p&&f.push(p),l=""}else l=n[c]}return l&&f.push(l),f},W=(t,o,d,h,n,f,l,c,j)=>{const m=h*n;let s=l;for(const p of o){const a=p.replace(/\s+/g," ").trim();if(!a){if(s-=m,s<=j)return s;continue}const u=J(a,c,d,h);for(const g of u){if(s<=j)return s;t.drawText(g,{x:f,y:s,size:h,font:d}),s-=m}s-=m*.4}return s},xe=async()=>{if(k){R(!0),U(null),N(0),y("Reading EPUB…"),D(null);try{const t=await k.arrayBuffer(),o=await we.loadAsync(t);o.file("META-INF/encryption.xml")&&console.warn("EPUB has encryption.xml; some content may be protected.");const{title:d,chapters:h}=await me(o);if(!h.length)throw new Error("No HTML/XHTML chapters found in EPUB.");const n=Z?h:h.sort((i,b)=>i.path.localeCompare(b.path)),f=[];for(let i=0;i<n.length;i++){y(`Extracting chapter ${i+1}/${n.length}`);const b=await L(o,n[i].path);f.push(ie(b)),N(Math.round((i+1)/n.length*40)),await new Promise(v=>setTimeout(v,0))}y("Building PDF…");const l=await je.create(),c=await pe(l,G);let m=l.addPage([P,w]),s=w-r.top;const p=r.left,a=le,u=r.bottom;if(d){const i=Math.min(F*1.6,22),b=i*(E+.2),v=J(d,a,c,i);for(const S of v)m.drawText(S,{x:p,y:s,size:i,font:c}),s-=b,s<=u&&(m=l.addPage([P,w]),s=w-r.top);s-=b*.5}const g=f.join(`

`).split(/\r?\n/),K=F*E,X=(i,b)=>{if(!q)return;const v=`${b}`,S=c.widthOfTextAtSize(v,10);i.drawText(v,{x:P/2-S/2,y:r.bottom*.5,size:10,font:c})};let M=1;X(m,M);for(let i=0;i<g.length;i++){y(`Laying out text ${Math.round(i/g.length*100)}%`);const b=W(m,[g[i]],c,F,E,p,s,a,u);b<=u?(m=l.addPage([P,w]),M++,X(m,M),s=w-r.top,s=W(m,[g[i]],c,F,E,p,s,a,u)):s=b;const v=40+Math.round((i+1)/g.length*60);N(Math.min(99,v)),await new Promise(S=>setTimeout(S,0))}const he=await l.save(),fe=new Blob([he],{type:"application/pdf"}),be=URL.createObjectURL(fe);D(be),N(100),y("Done")}catch(t){console.error(t),U(t?.message||"Failed to convert EPUB."),N(0),y("")}finally{R(!1)}}},ue=Pe["/tools/epub-to-pdf"];return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{...ue}),e.jsxs(ge,{children:[e.jsx("title",{children:"Convert EPUB to PDF – Fast & Free Online Converter | FilesNova"}),e.jsx("meta",{name:"description",content:"Convert EPUB ebooks to clean, readable PDFs with proper chapter order, margins, and fonts. 100% free, private, and fast on Files Nova."}),e.jsx("link",{rel:"canonical",href:"https://filesnova.com/tools/epub-to-pdf"})]}),e.jsx(Q,{data:{"@context":"https://schema.org","@type":"WebApplication",name:"EPUB to PDF – Files Nova",url:"https://filesnova.com/tools/epub-to-pdf",applicationCategory:"FileConverter",operatingSystem:"Web",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"}}}),e.jsx(Q,{data:{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://filesnova.com/"},{"@type":"ListItem",position:2,name:"EPUB to PDF",item:"https://filesnova.com/tools/epub-to-pdf"}]}}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 relative overflow-hidden pt-24",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-600/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-pink-400/20 to-orange-600/20 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-green-400/10 to-blue-600/10 rounded-full blur-3xl animate-pulse delay-500"})]}),e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-xl shadow-lg border-b border-white/20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center h-20 gap-",children:[e.jsx("div",{className:"relative shrink-0",children:e.jsx("img",{src:Fe,alt:"Files Nova",className:"w-16 h-16 md:w-20 md:h-20 object-contain",draggable:!1})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Files Nova"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"EPUB to PDF"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(Ee,{})})]})})}),e.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4 py-10",children:[e.jsxs("div",{className:"relative bg-gradient-to-br from-blue-50 to-indigo-100 rounded-3xl p-8 mb-8 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-white/40 backdrop-blur-sm"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-indigo-500 via-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mb-6 shadow-xl",children:e.jsx(ke,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-3xl font-black text-gray-900 mb-2",children:"EPUB to PDF"}),e.jsx("p",{className:"text-gray-700 text-lg leading-relaxed",children:"Convert your eBooks into clean PDFs with proper chapter order, readable fonts, and neat margins."}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-6",children:[e.jsxs("div",{className:"flex items-center bg-white/60 backdrop-blur-sm px-4 py-2 rounded-xl shadow-sm",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:"100% Secure"})]}),e.jsxs("div",{className:"flex items-center bg-white/60 backdrop-blur-sm px-4 py-2 rounded-xl shadow-sm",children:[e.jsx(Te,{className:"w-4 h-4 mr-2 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Lightning Fast"})]}),e.jsxs("div",{className:"flex items-center bg-white/60 backdrop-blur-sm px-4 py-2 rounded-xl shadow-sm",children:[e.jsx(Se,{className:"w-4 h-4 mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Premium Quality"})]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"1. Upload EPUB File"}),e.jsx(ve,{accept:".epub,application/epub+zip",multiple:!1,title:"Drop your EPUB file here",buttonLabel:"Choose File",supportedFormats:"EPUB",onFilesSelected:ne}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-2xl border border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ue,{className:"w-4 h-4 text-blue-600"}),e.jsx("h4",{className:"font-semibold",children:"Layout"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"block text-gray-600 mb-1",children:"Page size"}),e.jsxs("select",{className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:C,onChange:t=>ee(t.target.value),children:[e.jsx("option",{value:"A4",children:"A4"}),e.jsx("option",{value:"Letter",children:"Letter"})]})]}),e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"block text-gray-600 mb-1",children:"Font"}),e.jsxs("select",{className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:G,onChange:t=>te(t.target.value),children:[e.jsx("option",{value:"Helvetica",children:"Helvetica"}),e.jsx("option",{value:"TimesRoman",children:"Times"}),e.jsx("option",{value:"Courier",children:"Courier"})]})]}),e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"block text-gray-600 mb-1",children:"Font size"}),e.jsx("input",{type:"number",min:9,max:20,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:F,onChange:t=>se(parseInt(t.target.value||"12",10))})]}),e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"block text-gray-600 mb-1",children:"Line height"}),e.jsx("input",{type:"number",step:"0.1",min:1.1,max:2,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:E,onChange:t=>ae(parseFloat(t.target.value||"1.4"))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"block text-gray-600 mb-1",children:"Margins (top/left)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",min:24,max:96,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:r.top,onChange:t=>A({...r,top:parseInt(t.target.value||"54",10)})}),e.jsx("input",{type:"number",min:24,max:96,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:r.left,onChange:t=>A({...r,left:parseInt(t.target.value||"54",10)})})]})]}),e.jsxs("label",{className:"text-sm",children:[e.jsx("span",{className:"block text-gray-600 mb-1",children:"Margins (right/bottom)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",min:24,max:96,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:r.right,onChange:t=>A({...r,right:parseInt(t.target.value||"54",10)})}),e.jsx("input",{type:"number",min:24,max:96,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:r.bottom,onChange:t=>A({...r,bottom:parseInt(t.target.value||"54",10)})})]})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"accent-blue-600",checked:Z,onChange:t=>oe(t.target.checked)}),"Respect EPUB reading order (spine)"]}),e.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"accent-blue-600",checked:q,onChange:t=>re(t.target.checked)}),"Add page numbers"]})]})]}),e.jsxs("div",{className:"p-4 rounded-2xl border border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-amber-600"}),e.jsx("h4",{className:"font-semibold",children:"Notes"})]}),e.jsxs("ul",{className:"text-sm text-gray-700 list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"All processing happens in your browser. Nothing is uploaded."}),e.jsx("li",{children:"This converter focuses on clean text for universal readability."}),e.jsx("li",{children:"If an EPUB uses DRM/encrypted content, some chapters may be missing."})]})]})]}),e.jsx("button",{onClick:xe,disabled:!k||I,className:"mt-6 w-full px-4 py-4 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white font-bold rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Convert to PDF"}),(I||z>0)&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full animate-pulse",style:{width:`${z}%`}})}),H&&e.jsx("div",{className:"mt-2 text-xs text-gray-600 truncate",children:H})]}),$&&e.jsx("p",{className:"text-red-600 mt-4",children:$})]}),T&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"2. Download"}),e.jsxs("a",{href:T,download:k?.name.replace(/\.epub$/i,".pdf")||"ebook.pdf",className:"inline-flex items-center justify-center w-full px-4 py-4 bg-green-600 text-white font-bold rounded-xl hover:bg-green-700 transition-all",children:[e.jsx(Be,{className:"w-5 h-5 mr-2"})," Download PDF"]}),e.jsx("div",{className:"mt-6",children:e.jsx("iframe",{title:"Preview",src:T,className:"w-full h-[420px] rounded-xl border"})})]}),e.jsx(ye,{})]})]})]})};export{st as default};
